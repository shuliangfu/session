# @dreamer/session æµ‹è¯•æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•æ¦‚è§ˆ

| é¡¹ç›®                 | å€¼                                       |
| -------------------- | ---------------------------------------- |
| **æµ‹è¯•åŒ…ç‰ˆæœ¬**       | `@dreamer/session@1.0.0-beta.3`          |
| **æœåŠ¡å®¹å™¨ç‰ˆæœ¬**     | `@dreamer/service@1.0.0-beta.4`          |
| **è¿è¡Œæ—¶é€‚é…å™¨ç‰ˆæœ¬** | `@dreamer/runtime-adapter@1.0.0-beta.22` |
| **æµ‹è¯•æ¡†æ¶**         | `@dreamer/test@1.0.0-beta.39`            |
| **æµ‹è¯•æ—¶é—´**         | `2026-01-30`                             |
| **æµ‹è¯•ç¯å¢ƒ**         | Deno 2.5+, Bun 1.0+                      |

---

## ğŸ¯ æµ‹è¯•ç»“æœ

### æ€»ä½“ç»Ÿè®¡

| æŒ‡æ ‡         | å€¼    |
| ------------ | ----- |
| **æ€»æµ‹è¯•æ•°** | 28    |
| **é€šè¿‡**     | 28    |
| **å¤±è´¥**     | 0     |
| **é€šè¿‡ç‡**   | 100%  |
| **æ‰§è¡Œæ—¶é—´** | ~1.3s |

### æµ‹è¯•æ–‡ä»¶ç»Ÿè®¡

| æµ‹è¯•æ–‡ä»¶      | æµ‹è¯•æ•° | é€šè¿‡ | å¤±è´¥ | çŠ¶æ€    |
| ------------- | ------ | ---- | ---- | ------- |
| `mod.test.ts` | 28     | 28   | 0    | âœ… é€šè¿‡ |

---

## ğŸ“‹ åŠŸèƒ½æµ‹è¯•è¯¦æƒ…

### 1. FileSessionAdapter (mod.test.ts) - 4 ä¸ªæµ‹è¯•

| æµ‹è¯•åœºæ™¯                  | çŠ¶æ€ |
| ------------------------- | ---- |
| åº”è¯¥åˆ›å»ºå’Œè·å– Session    | âœ…   |
| åº”è¯¥åˆ é™¤ Session          | âœ…   |
| åº”è¯¥æ£€æŸ¥ Session æ˜¯å¦å­˜åœ¨ | âœ…   |
| åº”è¯¥å¤„ç†è¿‡æœŸçš„ Session    | âœ…   |

### 2. SessionManager (mod.test.ts) - 4 ä¸ªæµ‹è¯•

| æµ‹è¯•åœºæ™¯         | çŠ¶æ€ |
| ---------------- | ---- |
| åº”è¯¥åˆ›å»º Session | âœ…   |
| åº”è¯¥è·å– Session | âœ…   |
| åº”è¯¥æ›´æ–° Session | âœ…   |
| åº”è¯¥åˆ é™¤ Session | âœ…   |

### 3. Session ä¸­é—´ä»¶ (mod.test.ts) - 3 ä¸ªæµ‹è¯•

| æµ‹è¯•åœºæ™¯                     | çŠ¶æ€ |
| ---------------------------- | ---- |
| åº”è¯¥åˆ›å»ºæ–°çš„ Session         | âœ…   |
| åº”è¯¥ä» Cookie ä¸­è¯»å– Session | âœ…   |
| åº”è¯¥è‡ªåŠ¨ä¿å­˜ Session         | âœ…   |

### 4. SessionManager ServiceContainer é›†æˆ (mod.test.ts) - 7 ä¸ªæµ‹è¯•

| æµ‹è¯•åœºæ™¯                          | çŠ¶æ€ |
| --------------------------------- | ---- |
| åº”è¯¥è·å–é»˜è®¤ç®¡ç†å™¨åç§°            | âœ…   |
| åº”è¯¥è·å–è‡ªå®šä¹‰ç®¡ç†å™¨åç§°          | âœ…   |
| åº”è¯¥è®¾ç½®å’Œè·å–æœåŠ¡å®¹å™¨            | âœ…   |
| åº”è¯¥ä»æœåŠ¡å®¹å™¨è·å– SessionManager | âœ…   |
| åº”è¯¥åœ¨æœåŠ¡ä¸å­˜åœ¨æ—¶è¿”å› undefined  | âœ…   |
| åº”è¯¥è·å– Cookie åç§°              | âœ…   |
| åº”è¯¥è·å–å­˜å‚¨é€‚é…å™¨                | âœ…   |

### 5. createSessionManager å·¥å‚å‡½æ•° (mod.test.ts) - 5 ä¸ªæµ‹è¯•

| æµ‹è¯•åœºæ™¯                     | çŠ¶æ€ |
| ---------------------------- | ---- |
| åº”è¯¥åˆ›å»º SessionManager å®ä¾‹ | âœ…   |
| åº”è¯¥ä½¿ç”¨é»˜è®¤åç§°             | âœ…   |
| åº”è¯¥ä½¿ç”¨è‡ªå®šä¹‰åç§°           | âœ…   |
| åº”è¯¥èƒ½å¤Ÿåœ¨æœåŠ¡å®¹å™¨ä¸­æ³¨å†Œ     | âœ…   |
| åº”è¯¥æ”¯æŒåˆ›å»ºå’Œç®¡ç† Session   | âœ…   |

---

## ğŸ“ˆ æµ‹è¯•è¦†ç›–åˆ†æ

### æ¥å£æ–¹æ³•è¦†ç›–

| ç±»/æ¥å£                | æ–¹æ³•            | è¦†ç›–çŠ¶æ€ |
| ---------------------- | --------------- | -------- |
| `FileSessionAdapter`   | `get`           | âœ…       |
| `FileSessionAdapter`   | `set`           | âœ…       |
| `FileSessionAdapter`   | `delete`        | âœ…       |
| `FileSessionAdapter`   | `has`           | âœ…       |
| `SessionManager`       | `create`        | âœ…       |
| `SessionManager`       | `get`           | âœ…       |
| `SessionManager`       | `update`        | âœ…       |
| `SessionManager`       | `delete`        | âœ…       |
| `SessionManager`       | `has`           | âœ…       |
| `SessionManager`       | `getName`       | âœ…       |
| `SessionManager`       | `setContainer`  | âœ…       |
| `SessionManager`       | `getContainer`  | âœ…       |
| `SessionManager`       | `fromContainer` | âœ…       |
| `SessionManager`       | `getCookieName` | âœ…       |
| `SessionManager`       | `getStore`      | âœ…       |
| `session`              | ä¸­é—´ä»¶å‡½æ•°      | âœ…       |
| `createSessionManager` | å·¥å‚å‡½æ•°        | âœ…       |

### è¾¹ç•Œæƒ…å†µè¦†ç›–

| åœºæ™¯            | è¦†ç›–çŠ¶æ€ |
| --------------- | -------- |
| Session ä¸å­˜åœ¨  | âœ…       |
| Session è¿‡æœŸ    | âœ…       |
| ç©º Session æ•°æ® | âœ…       |
| é»˜è®¤é…ç½®        | âœ…       |
| è‡ªå®šä¹‰é…ç½®      | âœ…       |
| æœåŠ¡å®¹å™¨æœªè®¾ç½®  | âœ…       |
| æœåŠ¡ä¸å­˜åœ¨      | âœ…       |

### é”™è¯¯å¤„ç†è¦†ç›–

| åœºæ™¯                       | è¦†ç›–çŠ¶æ€ |
| -------------------------- | -------- |
| Session ä¸å­˜åœ¨æ—¶è¿”å› null  | âœ…       |
| æœåŠ¡ä¸å­˜åœ¨æ—¶è¿”å› undefined | âœ…       |

---

## âœ¨ ä¼˜ç‚¹

1. **å®Œæ•´çš„å­˜å‚¨é€‚é…å™¨æ”¯æŒ**ï¼šæ”¯æŒ Redisã€MongoDBã€æ–‡ä»¶å­˜å‚¨
2. **çµæ´»çš„ä¸­é—´ä»¶é›†æˆ**ï¼šä¸ HTTP åŒ…æ— ç¼é›†æˆ
3. **æ‰‹åŠ¨ç®¡ç†æ”¯æŒ**ï¼šé€šè¿‡ SessionManager æ”¯æŒæ‰‹åŠ¨ç®¡ç† Session
4. **æœåŠ¡å®¹å™¨é›†æˆ**ï¼šæ”¯æŒä¾èµ–æ³¨å…¥ï¼Œä¾¿äºç®¡ç†å¤šä¸ª Session ç®¡ç†å™¨å®ä¾‹
5. **è‡ªåŠ¨è¿‡æœŸç®¡ç†**ï¼šè‡ªåŠ¨æ¸…ç†è¿‡æœŸ Session
6. **è·¨è¿è¡Œæ—¶å…¼å®¹**ï¼šå…¼å®¹ Deno å’Œ Bun è¿è¡Œæ—¶

---

## ğŸ“ ç»“è®º

@dreamer/session çš„ 28
ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œè¦†ç›–äº†æ ¸å¿ƒåŠŸèƒ½å’ŒæœåŠ¡å®¹å™¨é›†æˆã€‚åŒ…æ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼ˆRedisã€MongoDBã€æ–‡ä»¶ï¼‰ï¼Œæä¾›ä¸­é—´ä»¶å’Œæ‰‹åŠ¨ç®¡ç†ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œå¹¶é€šè¿‡æœåŠ¡å®¹å™¨æ”¯æŒä¾èµ–æ³¨å…¥ã€‚

---

<div align="center">

**æµ‹è¯•é€šè¿‡ç‡ï¼š100%** âœ…

_å…± 28 ä¸ªæµ‹è¯• | å…¨éƒ¨é€šè¿‡_

</div>
